version: "0.2"

# Ubuntu 22.04 specific overrides for Homebrew (Linuxbrew)

directories:
  - name: "linuxbrew"
    path: "/home/linuxbrew/.linuxbrew"
    owner: "user"
    group: "user"
    mode: "0755"

commands:
  - name: "brew"
    path: "/home/linuxbrew/.linuxbrew/bin/brew"
    shell_completion: true
    man_page: "brew(1)"

providers:
  script:
    scripts:
      - name: "install"
        url: "https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh"
        version: "4.1.25"
        interpreter: "bash"
        checksum: "sha256:8b3a2d6b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b2b"
        arguments: []
        environment:
          NONINTERACTIVE: "1"
          CI: "1"
        working_dir: "/tmp"
        timeout: 1800
        custom_commands:
          download: "curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh -o install-brew.sh"
          install: "chmod +x install-brew.sh && NONINTERACTIVE=1 ./install-brew.sh && echo 'eval \"$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)\"' >> ~/.bashrc && echo 'eval \"$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)\"' >> ~/.zshrc"
          uninstall: "curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/uninstall.sh | NONINTERACTIVE=1 bash"
          validation: "/home/linuxbrew/.linuxbrew/bin/brew --version"
          version: "/home/linuxbrew/.linuxbrew/bin/brew --version | head -n1 | cut -d' ' -f2"